<!DOCTYPE html>
<html lang="lv">
<head>
  <meta charset="UTF-8">
  <title>3D Rotējoša "Sirds" ar Three.js</title>
  <style>
    /* Noņemam noklusējuma margin/padding, lai renderēšanas laukums būtu maksimāls */
    body {
      margin: 0;
      padding: 0;
      background: #ffe4e1; /* Maigs rozā fons */
      overflow: hidden;    /* Paslēpj ritjoslas, ja tādas būtu */
    }
    #canvas-container {
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>
<body>

<div id="canvas-container"></div>

<!-- Three.js no CDN (versija var mainīties, bet šī ir jaunākā stabilā) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.153.0/three.min.js" integrity="sha512-8KKcic8Wn/mg0I3FE7frh6yaAsljf2mD6w4F2EKFK55bHCEnO3A20U/OHsxSwlI7uxgq1T7Se4r7S/hHfcfZkQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
  // 1. Izveidojam pamata scēnu, kameru un renderer
  const scene = new THREE.Scene();
  scene.background = new THREE.Color(0xffffff);

  // Kamera: skata leņķis 45°, attiecība = pārlūka izmēri, attālums redzamībai 0.1 - 100
  const camera = new THREE.PerspectiveCamera(
    45, 
    window.innerWidth / window.innerHeight, 
    0.1, 
    100
  );
  camera.position.set(0, 0, 4); // Novietojam kameru nedaudz tālāk no objekta

  // Renderer: antialias=true nodrošina gludākas malas
  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.getElementById('canvas-container').appendChild(renderer.domElement);

  // 2. Pievienojam gaismas avotus
  const ambientLight = new THREE.AmbientLight(0xffffff, 0.5); 
  scene.add(ambientLight);

  const dirLight = new THREE.DirectionalLight(0xffffff, 0.5);
  dirLight.position.set(5, 5, 5);
  scene.add(dirLight);

  // 3. Izveidojam ģeometriju (kapsulas formu) un materiālu (spīdīgs, sarkans)
  // CapsuleGeometry(radius, length, capSegments, radialSegments)
  // radius ~ biezums, length ~ cilindra garums
  const geometry = new THREE.CapsuleGeometry(0.5, 1, 64, 64);

  // MeshPhysicalMaterial ļauj iegūt spīdumu un atspīdumus
  const material = new THREE.MeshPhysicalMaterial({
    color: 0xff0000,      // Sarkana krāsa
    metalness: 0.2,       // Mazliet metālisks efekts
    roughness: 0.2,       // Neliela nelīdzenība
    clearcoat: 1,         // Papildus spīdīgais "lakots" pārklājums
    clearcoatRoughness: 0 // Gandrīz perfekti gluds clearcoat
  });

  // 4. Izveidojam Mesh un pievienojam scēnai
  const heartObject = new THREE.Mesh(geometry, material);
  scene.add(heartObject);

  // 5. Animācijas cikls (requestAnimationFrame)
  function animate() {
    requestAnimationFrame(animate);

    // Rotējam objektu, lai tas nepārtraukti grieztos
    heartObject.rotation.x += 0.01;
    heartObject.rotation.y += 0.01;

    renderer.render(scene, camera);
  }
  animate();

  // 6. Loga izmēra maiņai pielāgojam kameru un renderer
  window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
</script>

</body>
</html>
